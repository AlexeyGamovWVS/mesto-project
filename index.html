<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mesto</title>
    <meta name="description" content="" />
    <meta name="Author" content="Alexey Gamov" />
    <link rel="shortcut icon" href="./images/favicon.svg" type="image/x-icon" />
    <link rel="stylesheet" href="./pages/index.css" />
  </head>
  <body class="page">
    <header class="header">
      <a href="/" class="header__logo-box">
        <img
          src="./images/logo.svg"
          alt="Логтип «Место."
          class="logo header__logo"
        />
      </a>
    </header>
    <main class="content">
      <section class="profile">
        <div class="profile__author-box">
          <img
            src="./images/kusto.jpeg"
            alt="Автор профиля."
            class="profile__photo"
          />
          <div class="profile__description">
            <div class="profile__title">
              <h1 class="profile__name">Жак-Ив Кусто</h1>
              <button
                aria-label="Редактировать."
                type="button"
                id="edit-profile"
                class="profile__btn profile__btn_type_edit"
              ></button>
            </div>
            <p class="profile__status">Исследователь океана</p>
          </div>
        </div>
        <button
          id="add-btn"
          type="button"
          class="profile__btn profile__btn_type_add"
          aria-label="Добавить новый пост."
        ></button>
      </section>
      <section class="posts">
        <ul class="posts__container">
          <li class="post">
            <img
              src="./images/karachaevsk.jpeg"
              alt="Карачаевск. Вид на старую крепость на холме крупным планом."
              class="post__img"
            />
            <div class="post__description-row">
              <h3 class="post__name">Карачаевск</h3>
              <button type="button" class="post__btn-like"></button>
            </div>
          </li>
          <li class="post">
            <img
              src="./images/elbrus.jpeg"
              alt="Эльбрус. Вид на гору на закате."
              class="post__img"
            />
            <div class="post__description-row">
              <h3 class="post__name">Гора Эльбрус</h3>
              <button type="button" class="post__btn-like"></button>
            </div>
          </li>
          <li class="post">
            <img
              src="./images/domaby.jpeg"
              alt="Домбай. Вид на скалы."
              class="post__img"
            />
            <div class="post__description-row">
              <h3 class="post__name">Домбай</h3>
              <button type="button" class="post__btn-like"></button>
            </div>
          </li>
          <li class="post">
            <img
              src="./images/mattern.jpeg"
              alt="Самая известная вершина в мире — гора Маттерхорн."
              class="post__img"
            />
            <div class="post__description-row">
              <h3 class="post__name">Маттерхорн</h3>
              <button type="button" class="post__btn-like"></button>
            </div>
          </li>
          <li class="post">
            <img
              src="./images/serro.jpeg"
              alt="Долина Серро-Торре."
              class="post__img"
            />
            <div class="post__description-row">
              <h3 class="post__name">Серро-Торре</h3>
              <button type="button" class="post__btn-like"></button>
            </div>
          </li>
          <li class="post">
            <img
              src="./images/rechime.jpeg"
              alt="Горные долины Тре-Чиме-ди-Лаваред."
              class="post__img"
            />
            <div class="post__description-row">
              <h3 class="post__name">Тре-Чиме-ди-Лаваред</h3>
              <button type="button" class="post__btn-like"></button>
            </div>
          </li>
        </ul>
      </section>
    </main>
    <footer class="footer">
      <div class="footer__container">
        <p class="footer__copyright">© 2020 Mesto Russia</p>
      </div>
    </footer>

    <!-- форма обновления профиля -->
    <div id="edit-profile-popup" class="popup">
      <div class="popup__container">
        <button
          type="button"
          id="close-edit-profile"
          class="popup__btn-close"
          aria-label="Закрыть окно."
        ></button>
        <form
          name="profile-edit-form"
          id="profile-edit-form"
          method=""
          action=""
          class="form"
        >
          <h2 class="form__title">Редактировать профиль</h2>
          <feildset class="form__input-container">
            <input
              name="name"
              id="author"
              class="form__item form__item_el_author"
              type="text"
              placeholder="Введите имя профиля"
            />
            <input
              name="status"
              id="status"
              class="form__item form__item_el_status"
              type="text"
              placeholder="Краткое описание профиля"
            />
          </feildset>
          <button type="submit" class="form__btn-save">Сохранить</button>
        </form>
      </div>
    </div>

    <!-- форма добавления поста -->
    <div id="post-add-popup" class="popup">
      <div class="popup__container">
        <button
          type="button"
          id="close-add-popup"
          class="popup__btn-close"
          aria-label="Закрыть окно."
        ></button>
        <form
          name="add-post-form"
          id="add-post-form"
          method=""
          action=""
          class="form"
        >
          <h2 class="form__title">Новое место</h2>
          <feildset class="form__input-container">
            <input
              name="place"
              id="place"
              class="form__item form__item_el_place"
              type="text"
              placeholder="Название"
            />
            <input
              name="img-link"
              id="img-link"
              class="form__item form__item_el_img-link"
              type="URL"
              placeholder="Ссылка на картинку"
            />
          </feildset>
          <button type="submit" class="form__btn-save">Сохранить</button>
        </form>
      </div>
    </div>

    <script>

      const editPop = document.querySelector('#edit-profile-popup');
      const btnEdit = document.querySelector('#edit-profile');
      const btnClose = document.querySelector('#close-edit-profile');
      const formElement = document.querySelector('#profile-edit-form');

      const profileName = document.querySelector('.profile__name');
      const profileDescr = document.querySelector('.profile__status');

      const inputName = formElement.querySelector('#author');
      const inputDescr = formElement.querySelector('#status');

      inputName.value = profileName.textContent;
      inputDescr.value = profileDescr.textContent;

      function changeProfile(evt) {
        evt.preventDefault();
        profileName.textContent = inputName.value;
        profileDescr.textContent = inputDescr.value;
        editPop.classList.remove('popup_opened');
      }

      btnEdit.addEventListener('click', function open() {editPop.classList.add('popup_opened')});
      btnClose.addEventListener('click', function close() {editPop.classList.remove('popup_opened')});

      formElement.addEventListener('submit', changeProfile);

    </script>

    <script>
      const posts = document.querySelector('.posts__container');
      const initialCards = [
        {
          name: 'Архыз',
          link: 'https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg'
        },
        {
          name: 'Челябинская область',
          link: 'https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg'
        },
        {
          name: 'Иваново',
          link: 'https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg'
        },
        {
          name: 'Камчатка',
          link: 'https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg'
        },
        {
          name: 'Холмогорский район',
          link: 'https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg'
        },
        {
          name: 'Байкал',
          link: 'https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg'
        }
      ];

      for (let i = 0; i < initialCards.length; i++) {
        posts.insertAdjacentHTML('afterbegin', `
          <li class="post">
            <img
              src="${initialCards[i].link}"
              class="post__img"
            />
            <div class="post__description-row">
              <h3 class="post__name">${initialCards[i].name}</h3>
              <button type="button" class="post__btn-like"></button>
            </div>
          </li>
        `);
      };

      const addBtn = document.querySelector('#add-btn');
      const addClose = document.querySelector('#close-add-popup');
      const addPop = document.querySelector('#post-add-popup');
      const addForm = document.querySelector('#add-post-form');
      const inputPlace = addForm.querySelector('#place');
      const inputImgLink = addForm.querySelector('#img-link');

      addBtn.addEventListener('click', function open() {addPop.classList.add('popup_opened')});
      addClose.addEventListener('click', function close() {addPop.classList.remove('popup_opened')});

      function addpost(evt) {
        evt.preventDefault();
        posts.insertAdjacentHTML('afterbegin', `
          <li class="post">
            <img
              src="${inputImgLink.value}"
              class="post__img"
            />
            <div class="post__description-row">
              <h3 class="post__name">${inputPlace.value}</h3>
              <button type="button" class="post__btn-like"></button>
            </div>
          </li>
        `);
        addPop.classList.remove('popup_opened');
      };

      addForm.addEventListener('submit', addpost);

    </script>
  </body>
</html>
